# Отправить сообщение

```
POST /messages
```

Отправляет сообщение в чат.

## Пример запроса

```bash
curl -X POST "https://platform-api.max.ru/messages?user_id={user_id}" \
  -H "Authorization: {access_token}" \
  -H "Content-Type: application/json" \
  -d '{
    "text": "Это сообщение с кнопкой-ссылкой",
    "attachments": [
      {
        "type": "inline_keyboard",
        "payload": {
          "buttons": [
            [
              {
                "type": "link",
                "text": "Откройте сайт",
                "url": "https://example.com"
              }
            ]
          ]
        }
      }
    ]
  }'
```

---

## Авторизация

- **access_token** (apiKey)

> Передача токена через query-параметры больше не поддерживается — используйте заголовок `Authorization: <token>`

Токен для вызова HTTP-запросов присваивается при создании бота — его можно найти в разделе платформы MAX для партнёров «Интеграция» → «Получить токен».

> Рекомендуем не разглашать токен посторонним, чтобы они не получили доступ к управлению ботом. Токен может быть отозван за нарушение Правил платформы.

---

## Параметры

| Параметр | Тип | Описание |
|----------|-----|----------|
| **user_id** | integer <int64> optional | Если вы хотите отправить сообщение пользователю, укажите его ID |
| **chat_id** | integer <int64> optional | Если сообщение отправляется в чат, укажите его ID |
| **disable_link_preview** | boolean optional | Если `false`, сервер не будет генерировать превью для ссылок в тексте сообщения |

---

## Тело запроса

| Поле | Тип | Описание |
|------|-----|----------|
| **text** | string Nullable | до 4000 символов. Новый текст сообщения |
| **attachments** | AttachmentRequest[] Nullable | Вложения сообщения. Если пусто, все вложения будут удалены |
| **link** | object NewMessageLink Nullable | Ссылка на сообщение |
| **notify** | boolean optional | По умолчанию: `true`. Если `false`, участники чата не будут уведомлены |
| **format** | enum TextFormat Nullable optional | Enum: `"markdown"`, `"html"`. Если установлен, текст сообщения будет форматирован данным способом. Для подробной информации загляните в раздел [Форматирование текста](../README.md#форматирование-текста) |

---

## Результат

| Поле | Тип | Описание |
|------|-----|----------|
| **message** | object [Message](../02_Объекты/Message.md) | Сообщение в чате |
