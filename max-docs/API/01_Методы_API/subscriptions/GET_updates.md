# Получение обновлений

```
GET /updates
```

Этот метод можно использовать для получения обновлений при разработке и тестировании, если ваш бот не подписан на Webhook. Для production-окружения рекомендуем использовать Webhook.

Метод использует долгий опрос (long polling). Каждое обновление имеет свой номер последовательности. Свойство `marker` в ответе указывает на следующее ожидаемое обновление.

Все предыдущие обновления считаются завершёнными после прохождения параметра `marker`. Если параметр `marker` не передан, бот получит все обновления, произошедшие после последнего подтверждения.

## Пример запроса

```bash
curl -X GET "https://platform-api.max.ru/updates" \
  -H "Authorization: {access_token}"
```

---

## Авторизация

- **access_token** (apiKey)

> Передача токена через query-параметры больше не поддерживается — используйте заголовок `Authorization: <token>`

Токен для вызова HTTP-запросов присваивается при создании бота — его можно найти в разделе платформы MAX для партнёров «Интеграция» → «Получить токен».

> Рекомендуем не разглашать токен посторонним, чтобы они не получили доступ к управлению ботом. Токен может быть отозван за нарушение Правил платформы.

---

## Параметры

| Параметр | Тип | Описание |
|----------|-----|----------|
| **limit** | integer [1-1000] optional | По умолчанию: 100. Максимальное количество обновлений для получения. |
| **timeout** | integer [0-90] optional | По умолчанию: 30. Тайм-аут в секундах для долгого опроса. |
| **marker** | integer <int64> Nullable optional | Если передан, бот получит обновления, которые еще не были получены. Если не передан, получит все новые обновления. |
| **types** | string[] Nullable optional | Пример: `types=message_created,message_callback`. Список типов обновлений, которые бот хочет получить (например, `message_created`, `message_callback`). |

---

## Результат

| Поле | Тип | Описание |
|------|-----|----------|
| **updates** | Update[] | Страница обновлений |
| **marker** | integer <int64> Nullable | Указатель на следующую страницу данных |
